<!-- templates/detalle.html -->
{% extends 'equipos/base.html' %}
{% block content %}
<div class="card" style="max-width: 900px; margin: 0 auto;">
    <div style="display: flex; gap: 2rem; align-items: center; margin-bottom: 2rem;">
        <img src="{{ equipo.escudo }}" alt="{{ equipo.nombre }}" style="width: 120px; height: 120px;">
        <div style="flex: 1;">
            <h1>{{ equipo.nombre }}</h1>
            <p><strong>Liga:</strong> {{ equipo.get_liga_display }}</p>
            <p><strong>Ciudad:</strong> {{ equipo.ciudad }}</p>
            <p><strong>Estadio:</strong> {{ equipo.estadio }} ({{ equipo.capacidad|floatformat:0 }} personas)</p>
            <p><strong>Fundado:</strong> {{ equipo.fundado }}</p>
            <button id="seguir-{{ equipo.id }}" class="btn seguir-btn {% if es_seguidor %}siguiendo{% endif %}" 
                    onclick="toggleSeguir({{ equipo.id }})">
                {% if es_seguidor %}âœ… Siguiendo{% else %}âž• Seguir{% endif %}
            </button>
        </div>
    </div>
    
    <div class="stats" style="background: #f8f9fa; padding: 1rem; border-radius: 10px; margin-bottom: 2rem;">
        <div class="stat">
            <div class="stat-value" style="color: #28a745;">{{ equipo.puntos }}</div>
            <div>Puntos</div>
        </div>
        <div class="stat">
            <div class="stat-value">{{ equipo.partidos_jugados }}</div>
            <div>Partidos</div>
        </div>
        <div class="stat">
            <div class="stat-value" style="color: #007bff;">{{ equipo.victorias }}</div>
            <div>Victorias</div>
        </div>
        <div class="stat">
            <div class="stat-value" style="color: #ffc107;">{{ equipo.empates }}</div>
            <div>Empates</div>
        </div>
        <div class="stat">
            <div class="stat-value" style="color: #dc3545;">{{ equipo.derrotas }}</div>
            <div>Derrotas</div>
        </div>
        <div class="stat">
            <div class="stat-value">{{ equipo.goles_favor }}</div>
            <div>Goles a Favor</div>
        </div>
    </div>
    
    <p style="margin-bottom: 2rem;">{{ equipo.descripcion }}</p>
    
    <h3>ðŸ’¬ Comentarios de Hinchas</h3>
    <form method="post" action="{% url 'agregar_comentario' equipo.id %}" style="margin: 1rem 0;">
        {% csrf_token %}
        <textarea name="mensaje" placeholder="Â¿QuÃ© opinas de {{ equipo.nombre }}?" 
                 style="width: 100%; height: 80px; margin-bottom: 1rem; padding: 0.5rem; border-radius: 5px; border: 1px solid #ddd;"></textarea>
        <button type="submit" class="btn">Comentar âš½</button>
    </form>
    
    {% for comentario in comentarios %}
    <div style="background: #f8f9fa; padding: 1rem; margin: 0.5rem 0; border-radius: 5px;">
        <strong>{{ comentario.usuario.username }}</strong>
        <small style="color: #666;">{{ comentario.fecha|date:"d/m/Y H:i" }}</small>
        <p>{{ comentario.mensaje }}</p>
    </div>
    {% endfor %}
</div>
{% endblock %}